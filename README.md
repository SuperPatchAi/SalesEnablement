# SuperPatch Sales Enablement Platform

> **From 0 to AI-Powered Outbound Sales in 5 Phases**  
> A comprehensive system that transforms world-class sales training into intelligent, context-aware voice agents with a full-featured Call Center UI.

---

## ğŸ¯ The Vision

Build an end-to-end sales enablement platform that:
1. **Extracts** proven sales frameworks from top trainers (Grant Cardone, Jordan Belfort, Brian Tracy)
2. **Synthesizes** these techniques into practitioner-specific word tracks
3. **Deploys** intelligent AI voice agents that can conduct real sales conversations
4. **Schedules** in-person demo appointments directly into calendars
5. **Manages** campaigns through a modern Call Center UI with real-time analytics

---

## ğŸ“Š Project Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SUPERPATCH SALES ENABLEMENT                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   PHASE 1: Knowledge Extraction                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚  60 YouTube â”‚â”€â”€â”€â–¶â”‚   Gemini    â”‚â”€â”€â”€â–¶â”‚  44 Framework   â”‚            â”‚
â”‚   â”‚   Videos    â”‚    â”‚  Analysis   â”‚    â”‚   Extractions   â”‚            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                         â”‚
â”‚   PHASE 2: Content Synthesis                                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚  Frameworks â”‚â”€â”€â”€â–¶â”‚  SuperPatch â”‚â”€â”€â”€â–¶â”‚  6 Practitioner â”‚            â”‚
â”‚   â”‚ + Products  â”‚    â”‚   Context   â”‚    â”‚   Word Tracks   â”‚            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                         â”‚
â”‚   PHASE 3: Voice Agent Development                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚ Word Tracks â”‚â”€â”€â”€â–¶â”‚  Bland.ai   â”‚â”€â”€â”€â–¶â”‚  36-38 Nodes    â”‚            â”‚
â”‚   â”‚  + Context  â”‚    â”‚  Pathways   â”‚    â”‚  365-423 Edges  â”‚            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                         â”‚
â”‚   PHASE 4: Scheduling Integration                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚   Cal.com   â”‚â”€â”€â”€â–¶â”‚   Webhooks  â”‚â”€â”€â”€â–¶â”‚   Automated     â”‚            â”‚
â”‚   â”‚     API     â”‚    â”‚   + Tools   â”‚    â”‚   Bookings      â”‚            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                         â”‚
â”‚   PHASE 5: Call Center & Analytics                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚  Supabase   â”‚â”€â”€â”€â–¶â”‚  Real-time  â”‚â”€â”€â”€â–¶â”‚  Campaign       â”‚            â”‚
â”‚   â”‚  Database   â”‚    â”‚    Hooks    â”‚    â”‚  Management     â”‚            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Project Structure

```
SalesEnablement/
â”‚
â”œâ”€â”€ ğŸ“º PHASE 1: Knowledge Extraction
â”‚   â”œâ”€â”€ YouTube videos.md          # 60 curated training videos
â”‚   â”œâ”€â”€ youtube_videos.json        # Structured video metadata
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â”œâ”€â”€ gemini_video_analyzer.py   # AI video analysis tool
â”‚   â”‚   â””â”€â”€ transcribe_video.py        # Audio transcription
â”‚   â”œâ”€â”€ analyses/                  # 44 video analyses (JSON + MD)
â”‚   â”‚   â”œâ”€â”€ _summary.json
â”‚   â”‚   â””â”€â”€ [video_id].md          # Extracted frameworks per video
â”‚   â””â”€â”€ frameworks/
â”‚       â”œâ”€â”€ all_frameworks.md      # 5,357 lines of extracted techniques
â”‚       â”œâ”€â”€ closing_techniques.md
â”‚       â”œâ”€â”€ objection_handling.md
â”‚       â”œâ”€â”€ cold_calling.md
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ ğŸ“ PHASE 2: Content Synthesis
â”‚   â”œâ”€â”€ products/
â”‚   â”‚   â”œâ”€â”€ SuperPatch_Product_Reference.md
â”‚   â”‚   â””â”€â”€ superpatch_products.json
â”‚   â”œâ”€â”€ b2b_sales_enablement/
â”‚   â”‚   â””â”€â”€ wordtracks/
â”‚   â”‚       â””â”€â”€ practitioners/     # 6 practitioner-specific guides
â”‚   â”‚           â”œâ”€â”€ Chiropractors_WordTrack.md
â”‚   â”‚           â”œâ”€â”€ Massage_Therapists_WordTrack.md
â”‚   â”‚           â”œâ”€â”€ Naturopaths_WordTrack.md
â”‚   â”‚           â”œâ”€â”€ Functional_Medicine_WordTrack.md
â”‚   â”‚           â”œâ”€â”€ Integrative_Medicine_WordTrack.md
â”‚   â”‚           â””â”€â”€ Acupuncturists_WordTrack.md
â”‚   â””â”€â”€ canadian_market/           # Canadian-specific content
â”‚       â”œâ”€â”€ PRACTITIONER_SCRAPER_README.md
â”‚       â””â”€â”€ wordtracks/
â”‚
â”œâ”€â”€ ğŸ“Š Data Collection Tools
â”‚   â””â”€â”€ scripts/
â”‚       â”œâ”€â”€ canadian_practitioner_scraper.py  # Google Maps API scraper
â”‚       â”œâ”€â”€ enrich_practitioner_data.py       # Website data enrichment
â”‚       â””â”€â”€ test_canadian_practitioner_scraper.py
â”‚
â”œâ”€â”€ ğŸ¤– PHASE 3: Voice Agent Development
â”‚   â””â”€â”€ b2b_sales_enablement/
â”‚       â””â”€â”€ bland_ai_pathways/
â”‚           â”œâ”€â”€ [Practitioner]_contextual.json  # Live pathways
â”‚           â”œâ”€â”€ deploy_pathways.py
â”‚           â”œâ”€â”€ update_pathways_with_context.py
â”‚           â”œâ”€â”€ expanded_pathway_generator.py
â”‚           â””â”€â”€ superpatch_knowledge_base.txt
â”‚
â”œâ”€â”€ ğŸ“… PHASE 4: Scheduling Integration
â”‚   â””â”€â”€ b2b_sales_enablement/
â”‚       â”œâ”€â”€ appointment_webhook/
â”‚       â”‚   â”œâ”€â”€ server.py              # Flask webhook server (legacy)
â”‚       â”‚   â”œâ”€â”€ sheets_integration.py  # Google Sheets logging
â”‚       â”‚   â””â”€â”€ update_bland_tools_calcom.py
â”‚       â””â”€â”€ bland_ai_pathways/
â”‚           â”œâ”€â”€ bland_cli.py           # CLI for Bland.ai API
â”‚           â”œâ”€â”€ make_call_with_kb.py   # Python call script
â”‚           â””â”€â”€ make_call_with_kb.sh   # Bash call script
â”‚
â””â”€â”€ ğŸ–¥ï¸ PHASE 5: Frontend Application & Call Center
    â””â”€â”€ superpatch-frontend/           # Next.js sales enablement app
        â”œâ”€â”€ src/app/
        â”‚   â”œâ”€â”€ campaign/              # Call Center Dashboard
        â”‚   â”œâ”€â”€ voice-agent/           # Voice Agent Dashboard
        â”‚   â””â”€â”€ api/
        â”‚       â”œâ”€â”€ bland/             # Bland.ai API proxy routes
        â”‚       â”œâ”€â”€ campaign/          # Campaign management API
        â”‚       â”‚   â”œâ”€â”€ calls/         # Call records CRUD
        â”‚       â”‚   â””â”€â”€ notes/         # Notes management
        â”‚       â”œâ”€â”€ practitioners/     # Practitioner data API
        â”‚       â””â”€â”€ webhooks/
        â”‚           â””â”€â”€ bland/         # Cal.com booking webhook
        â”œâ”€â”€ src/components/
        â”‚   â”œâ”€â”€ campaign/              # Call Center components
        â”‚   â”‚   â”œâ”€â”€ analytics-dashboard.tsx
        â”‚   â”‚   â”œâ”€â”€ practitioner-map.tsx
        â”‚   â”‚   â”œâ”€â”€ call-timeline.tsx
        â”‚   â”‚   â”œâ”€â”€ enhanced-charts.tsx
        â”‚   â”‚   â””â”€â”€ empty-states.tsx
        â”‚   â””â”€â”€ ui/                    # Reusable UI components
        â”œâ”€â”€ src/hooks/                 # React hooks
        â”‚   â”œâ”€â”€ useCallRecords.ts      # Real-time call records
        â”‚   â”œâ”€â”€ useCallNotes.ts        # Notes management
        â”‚   â””â”€â”€ useCampaignStats.ts    # Campaign statistics
        â”œâ”€â”€ src/lib/
        â”‚   â”œâ”€â”€ supabase.ts            # Supabase client
        â”‚   â””â”€â”€ db/                    # Database service layer
        â”‚       â”œâ”€â”€ call-records.ts
        â”‚       â”œâ”€â”€ call-notes.ts
        â”‚       â”œâ”€â”€ analytics.ts
        â”‚       â””â”€â”€ migrate-localstorage.ts
        â”œâ”€â”€ supabase/
        â”‚   â””â”€â”€ schema.sql             # Database schema
        â””â”€â”€ public/
            â””â”€â”€ data/
                â””â”€â”€ practitioners.json  # 40,000+ practitioner records
```

---

## ğŸ–¥ï¸ Call Center Dashboard

**Live URL**: https://sales-enablement-six.vercel.app/campaign

The Call Center is a comprehensive campaign management interface for running AI-powered outbound sales campaigns.

### Features

#### ğŸ“‹ Practitioner List
- **40,000+ practitioners** from Google Maps API scraping
- **Virtualized table** with smooth scrolling (handles large datasets)
- **Advanced filtering**: Province, city, practitioner type, rating, enrichment status
- **Column sorting**: Click any column header to sort
- **Enrichment indicators**: Visual badges for enriched data
- **Quick actions**: One-click calling, view details, add to queue

#### ğŸ—ºï¸ Interactive Map
- **Leaflet-based map** with practitioner markers
- **Clustering** for performance with large datasets
- **Status-based markers**: Color-coded by call status
- **Click to view**: Opens practitioner detail drawer
- **Load all option**: Fetch full dataset for complete coverage

#### ğŸ“Š Analytics Dashboard
- **Real-time statistics**: Calls today, connections, bookings, queue size
- **Gauge charts**: Connection rate, booking rate visualization
- **Call volume by day**: 7-day trend chart
- **Performance by practitioner type**: Comparative analysis
- **Duration trends**: Average call length over time

#### â±ï¸ Call Timeline
- **Activity feed**: Real-time call events
- **Status updates**: Track call progression
- **Transcript access**: Full conversation records
- **Filtering**: By status, date range, practitioner

#### ğŸ“ Notes System
- **Per-practitioner notes**: Add observations, follow-up items
- **Auto-save**: Notes persist automatically
- **Database-backed**: Stored in Supabase (with localStorage fallback)

#### âš¡ Quick Call
- **Search practitioners**: Find by name, phone, or city
- **Pathway selection**: Choose conversation type per practitioner
- **Direct dialing**: Start calls with one click

### Call Center UI Components

| Component | Purpose |
|-----------|---------|
| `practitioner-map.tsx` | Interactive Leaflet map with clustering |
| `call-timeline.tsx` | Activity feed with call events |
| `analytics-dashboard.tsx` | Charts and statistics |
| `enhanced-charts.tsx` | Gauge, radial, and bar charts |
| `empty-states.tsx` | Friendly empty state illustrations |
| `skeleton-loaders.tsx` | Loading state skeletons |
| `practitioner-detail-drawer.tsx` | Full practitioner info + call history |

---

## ğŸ’¾ Database Integration (Supabase)

### Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client (Browser)  â”‚      â”‚   Server (API)      â”‚
â”‚                     â”‚      â”‚                     â”‚
â”‚  useCallRecords â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â–¶â”‚  /api/campaign/     â”‚
â”‚  useCallNotes   â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â–¶â”‚  calls, notes       â”‚
â”‚  useCampaignStats â”€â”€â”¼â”€â”€â”€â”€â”€â–¶â”‚                     â”‚
â”‚                     â”‚      â”‚         â”‚           â”‚
â”‚       â–²             â”‚      â”‚         â–¼           â”‚
â”‚       â”‚ realtime    â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚       â”‚ updates     â”‚â—€â”€â”€â”€â”€â”€â”¼â”€â”€â”‚  Supabase   â”‚    â”‚
â”‚       â”‚             â”‚      â”‚  â”‚  PostgreSQL â”‚    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
        â”‚                    â”‚         â–²           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
                             â”‚         â”‚           â”‚
                             â”‚  /api/webhooks/     â”‚
                             â”‚  bland â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚  (writes directly)
                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Database Schema

```sql
-- Call Records (main table)
CREATE TABLE call_records (
  id UUID PRIMARY KEY,
  practitioner_id TEXT NOT NULL,
  practitioner_name TEXT NOT NULL,
  practitioner_type TEXT,
  phone TEXT NOT NULL,
  address TEXT,
  city TEXT,
  province TEXT,
  call_id TEXT UNIQUE,           -- Bland.ai call ID
  status TEXT DEFAULT 'not_called',
  call_started_at TIMESTAMPTZ,
  call_ended_at TIMESTAMPTZ,
  duration_seconds INTEGER,
  transcript TEXT,               -- Full conversation
  summary TEXT,                  -- AI-generated summary
  appointment_booked BOOLEAN,
  appointment_time TIMESTAMPTZ,
  calendar_invite_sent BOOLEAN,
  practitioner_email TEXT,
  booking_id TEXT,
  notes TEXT,
  created_at TIMESTAMPTZ,
  updated_at TIMESTAMPTZ
);

-- Call Notes (multiple notes per call)
CREATE TABLE call_notes (
  id UUID PRIMARY KEY,
  call_record_id UUID REFERENCES call_records(id),
  content TEXT NOT NULL,
  created_by TEXT,
  created_at TIMESTAMPTZ
);

-- Campaign Analytics (daily aggregates)
CREATE TABLE campaign_analytics (
  id UUID PRIMARY KEY,
  date DATE UNIQUE,
  total_calls INTEGER,
  completed INTEGER,
  booked INTEGER,
  failed INTEGER,
  total_duration_seconds INTEGER,
  created_at TIMESTAMPTZ
);
```

### React Hooks

| Hook | Purpose |
|------|---------|
| `useCallRecords` | Fetch & manage call records with real-time subscriptions |
| `useCallNotes` | CRUD operations for notes |
| `useCampaignStats` | Aggregated campaign statistics |

### Setting Up Supabase

1. **Create Project**: Go to [supabase.com](https://supabase.com) and create a new project

2. **Run Schema**: Copy `superpatch-frontend/supabase/schema.sql` to SQL Editor and execute

3. **Get API Keys**: From Project Settings > API:
   - Project URL
   - anon (public) key
   - service_role key (for server-side)

4. **Configure Environment Variables**:

```bash
# .env.local (or Vercel Environment Variables)
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbG...
SUPABASE_SERVICE_ROLE_KEY=eyJhbG...
```

5. **Deploy to Vercel**: Add the same variables in Vercel dashboard

### Graceful Fallback

The system works **without Supabase** using localStorage:

- If environment variables aren't set, all data is stored locally
- Hooks detect Supabase availability and fall back automatically
- Migration script available to move localStorage â†’ Supabase

```typescript
// Automatic fallback in hooks
if (!isSupabaseConfigured) {
  // Uses localStorage via campaign-storage.ts
}
```

---

## ğŸ”„ Data Enrichment

### Website Scraping

The `enrich_practitioner_data.py` script crawls practitioner websites to extract:

| Data Point | Description |
|------------|-------------|
| **Team Members** | Names and credentials of practitioners |
| **Services** | List of services offered |
| **Emails** | Contact emails found on site |
| **Phone Numbers** | Additional phone numbers |
| **Languages** | Languages spoken at the practice |

### Enrichment Display in UI

- **Enriched Badge**: Purple sparkle indicator on practitioner rows
- **Enrichment Column**: Sortable column showing enrichment status
- **Detail Drawer**: Full enrichment data with team members, services, etc.
- **Filter Options**: Filter by has enrichment, has emails, has team members

### Running Enrichment

```bash
cd scripts
python enrich_practitioner_data.py \
  --input ../canadian_practitioners/all_practitioners_latest.json \
  --output ../canadian_practitioners/enriched_practitioners.json \
  --limit 100
```

---

## ğŸ”¬ Phase 1: Knowledge Extraction

### The Source Material
We curated **60 YouTube videos** from the world's top sales trainers:

| Trainer | Focus Area | Key Techniques |
|---------|------------|----------------|
| **Grant Cardone** | Closing, Persistence | 10X Rule, Assumptive Close |
| **Jordan Belfort** | Persuasion, Tonality | Straight Line Selling, Certainty Transfer |
| **Brian Tracy** | Psychology, Process | AIDA, Consultative Selling |
| **Jeremy Miner** | NEPQ, Questions | Neuro-Emotional Persuasion Questions |
| **Various** | Objection Handling | Feel-Felt-Found, Reframing |

### The Extraction Process

```python
# scripts/gemini_video_analyzer.py
# Uses Google Gemini to analyze videos and extract:
# - Step-by-step frameworks
# - Exact scripts and word tracks
# - Objection handling responses
# - SuperPatch-specific applications

ANALYSIS_PROMPT = """
Analyze this sales training video and extract:
1. Main technique and framework name
2. Step-by-step process with psychology
3. Exact scripts and word tracks (quotable)
4. Objection handling with exact responses
5. Key actionable takeaways
6. How to apply to SuperPatch wellness products
"""
```

### Output: 44 Framework Analyses

Each video analysis includes SuperPatch-specific applications:

```markdown
## CLOSING Steps Framework (from VoUJ848UpWA)

### The 5-Step Closing Framework:
1. Proactively Overcome Objections
2. Sprinkle "Do you have any questions?"
3. The "Loop" Before Close
4. The Close
5. The Backup Close

### SuperPatch Application:
"Many people wonder how a small patch can make a big difference. 
Our patches don't contain drugsâ€”they use vibrotactile technology 
to communicate with your brain. Let me show you how that works..."
```

---

## ğŸ“‹ Phase 2: Content Synthesis

### Product Knowledge Base

13 SuperPatch products with clinical evidence:

| Product | Target | Clinical Evidence |
|---------|--------|-------------------|
| **Freedom** | Pain Relief | RESTORE Study: RCT, 118 participants |
| **REM** | Sleep | HARMONI Study: 80% stopped sleep meds |
| **Liberty** | Balance | 31% improvement, p<0.05 |
| **Peace** | Stress | Parasympathetic activation |
| **Boost** | Energy | Drug-free energy support |
| **Focus** | Clarity | Cognitive enhancement |
| *+ 7 more* | Various | Supporting research |

### Practitioner-Specific Word Tracks

We created comprehensive sales guides for 6 practitioner types, each with:

| Section | Content |
|---------|---------|
| **Understanding** | Practice philosophy, patient demographics, pain points |
| **Product Recommendations** | Which patches fit which patient presentations |
| **Opening Scripts** | 5 different approaches (cold call, referral, conference, etc.) |
| **Discovery Questions** | 15+ practitioner-specific questions |
| **Product Presentation** | P-A-S-E framework adapted to practice |
| **Objection Handling** | 6-8 objections with exact responses |
| **Closing Scripts** | 5 closing approaches |
| **Follow-Up Sequences** | Day 1, 3, 7, 14 email/call scripts |
| **Business Models** | Wholesale vs. Affiliate explanation |

---

## ğŸ¤– Phase 3: Voice Agent Development

### Bland.ai Conversational Pathways

We programmatically generated **6 intelligent voice agents**â€”one for each practitioner typeâ€”with **36-38 nodes** and **365-423 edges** enabling full dynamic routing:

```
Conversation Flow (36-38 Nodes with Global Routing):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Introduction â”‚ â”€â”€â–¶ "Hi, this is Jennifer with SuperPatch..."
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â–¼                                                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  Discovery  â”‚â—€â”€â”€â–¶â”‚  GLOBAL ROUTING (any node can    â”‚    â”‚
â”‚  Questions  â”‚    â”‚  jump to any other node)         â”‚    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
      â”‚                        â”‚                           â”‚
      â–¼                        â–¼                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  Product    â”‚â—€â”€â”€â–¶â”‚  Objection      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
â”‚ Presentationsâ”‚    â”‚  Handling (9)   â”‚  (return edges)   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
      â”‚                                                    â”‚
      â–¼                                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  Business   â”‚â—€â”€â”€â–¶â”‚  Scheduling     â”‚                    â”‚
â”‚   Model     â”‚    â”‚  (Cal.com)      â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
      â”‚                   â”‚                                â”‚
      â–¼                   â–¼                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚ Close/Order â”‚    â”‚  Send Info Only â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  End Call   â”‚ â”€â”€â–¶ 5 ending variations (sale, callback, etc.)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Available Pathway IDs

| Practitioner | Pathway ID |
|--------------|------------|
| Chiropractors | `cf2233ef-7fb2-49ff-af29-0eee47204e9f` |
| Massage Therapists | `d202aad7-bcb6-478c-a211-b00877545e05` |
| Naturopaths | `1d07d635-147e-4f69-a4cd-c124b33b073d` |
| Integrative Medicine | `1c958dd7-e1ff-4f6d-b9a3-f80a369c26aa` |
| Functional Medicine | `236dbd85-c74d-4774-a7af-4b5812015c68` |
| Acupuncturists | `154f93f4-54a5-4900-92e8-0fa217508127` |

---

## ğŸ“… Phase 4: Scheduling Integration

### Cal.com + Webhook Integration

> **Important**: Bland.ai's API does not allow `tools` to be passed when using `pathway_id`. 
> Therefore, Cal.com booking is handled via **webhooks** instead of inline tools.

The voice agent workflow:
1. **Collects scheduling info** during the call (name, email, preferred time, address)
2. **Sends webhook** on call completion with extracted variables
3. **Webhook books** to Cal.com automatically
4. **Saves to Supabase** for tracking and analytics

### Webhook Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Voice Agent â”‚â”€â”€â”€â–¶â”‚ Bland.ai â”‚â”€â”€â”€â–¶â”‚ Your Webhookâ”‚â”€â”€â”€â–¶â”‚ Cal.com â”‚
â”‚   (Call)    â”‚    â”‚ (Pathway)â”‚    â”‚ (Book Appt) â”‚    â”‚(Calendar)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚  Supabase   â”‚
                                   â”‚  Database   â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Webhook Endpoint

```typescript
// superpatch-frontend/src/app/api/webhooks/bland/route.ts

// Receives call completion data from Bland.ai
// Extracts: name, email, preferred_time, address, practice_name
// Books: Cal.com appointment for in-person sales visit
// Saves: Call record with transcript to Supabase
// Fallback: Logs for manual follow-up if booking fails
```

**Production Webhook URL**:
```
https://sales-enablement-six.vercel.app/api/webhooks/bland
```

---

## ğŸ‡¨ğŸ‡¦ Canadian Practitioner Data Collection

A Google Maps Places API scraper for collecting wellness practitioner leads across Canada.

### Market Size (Total Addressable Market)

| Practitioner Type | Est. Count | Key Provinces |
|-------------------|------------|---------------|
| **Massage Therapists** | 23,000+ | Ontario, BC |
| **Chiropractors** | ~9,000 | Ontario, Quebec, BC |
| **Acupuncturists** | ~4,000 | BC, Ontario, Quebec |
| **Integrative Medicine** | ~2,500 | Urban centers |
| **Functional Medicine** | ~1,500 | Toronto, Vancouver |
| **Naturopaths** | ~800 | BC, Ontario |
| **TOTAL** | **~40,800** | |

### Data Collected Per Practitioner

- Business name, address, phone number
- Website URL
- Google rating and review count
- Geographic coordinates (for map display)
- Business status (operational/closed)
- Direct Google Maps link

### Enrichment Data (from website scraping)

- Team members with credentials
- Services offered
- Contact emails
- Languages spoken
- Additional phone numbers

### Usage

```bash
# Run the scraper (full Canada ~$70)
python scripts/canadian_practitioner_scraper.py

# Run for specific provinces only (~$15-20)
python scripts/canadian_practitioner_scraper.py --provinces "Ontario" "British Columbia"

# Run enrichment
python scripts/enrich_practitioner_data.py \
  --input ../canadian_practitioners/all_practitioners_latest.json \
  --output ../canadian_practitioners/enriched_practitioners.json
```

---

## ğŸš€ How to Use

### Running the Call Center

```bash
cd superpatch-frontend
npm install
npm run dev
# Open http://localhost:3000/campaign
```

### Running the Voice Agent Dashboard

```bash
cd superpatch-frontend
npm run dev
# Open http://localhost:3000/voice-agent
```

### Command Line Interface

```bash
cd b2b_sales_enablement/bland_ai_pathways

# Make a call
python bland_cli.py call +1234567890 --pathway cf2233ef-7fb2-49ff-af29-0eee47204e9f

# Check call status
python bland_cli.py status <call_id>

# List recent calls
python bland_cli.py list
```

---

## ğŸ”§ Technical Stack

### Frontend
- **Next.js 14** + TypeScript
- **Tailwind CSS** + shadcn/ui components
- **Framer Motion** for animations
- **Recharts** for data visualization
- **React Leaflet** for maps
- **@tanstack/react-virtual** for virtualized lists

### Backend
- **Next.js API Routes**
- **Supabase** (PostgreSQL) for database
- **Supabase Realtime** for live updates

### External Services
| Service | Purpose |
|---------|---------|
| **Google Gemini** | Video analysis and framework extraction |
| **Bland.ai** | Voice agent platform |
| **Cal.com** | Appointment scheduling |
| **Supabase** | Database and real-time subscriptions |
| **Google Maps API** | Practitioner data collection |
| **Firecrawl** | Website scraping for enrichment |

---

## ğŸ“ˆ Results & Metrics

### Content Generated

| Asset | Quantity |
|-------|----------|
| Videos Analyzed | 44 |
| Framework Extractions | 5,357 lines |
| Word Track Documents | 6 (1,500+ lines each) |
| Conversation Nodes | 221 (36-38 per pathway Ã— 6) |
| Conversation Edges | 2,339 total (365-423 per pathway) |
| Practitioner Records | 40,000+ |
| Unique Objection Responses | 54+ |
| Discovery Questions | 90+ |

### Voice Agent Capabilities

- âœ… Natural conversation flow
- âœ… Practitioner-specific language
- âœ… Real-time objection handling
- âœ… Global routing - jump to any node instantly
- âœ… Return routing - flow back after handling objections
- âœ… Product routing - jump to specific product when asked
- âœ… Calendar integration (Cal.com)
- âœ… Knowledge base connected
- âœ… Transcripts and summaries saved to database

### Call Center Capabilities

- âœ… 40,000+ practitioner database
- âœ… Interactive map visualization
- âœ… Real-time call status updates
- âœ… Full analytics dashboard
- âœ… Notes per practitioner
- âœ… Enrichment data display
- âœ… Advanced filtering and sorting
- âœ… Virtualized lists for performance

---

## ğŸ”® Future Enhancements

### Completed âœ…
- [x] Voice Agent Dashboard with call management
- [x] Webhook-based Cal.com booking integration
- [x] CLI tool for Bland.ai API interactions
- [x] Global routing (any node â†’ any node)
- [x] Knowledge base integration
- [x] Canadian practitioner data collection tool
- [x] **Call Center Dashboard with 40K+ practitioners**
- [x] **Interactive map with clustering**
- [x] **Real-time analytics dashboard**
- [x] **Supabase database integration**
- [x] **Call timeline view**
- [x] **Data enrichment pipeline**
- [x] **Notes system per practitioner**

### Planned
- [ ] Add more practitioner types (Physical Therapists, Athletic Trainers)
- [ ] SMS follow-up sequences
- [ ] CRM integration (HubSpot, Salesforce)
- [ ] A/B test different opening scripts
- [ ] Multilingual support
- [ ] Real-time call monitoring (live transcription)
- [ ] Automated follow-up email sequences
- [ ] Call outcome tracking and conversion metrics

---

## ğŸ“„ License

Proprietary - SuperPatch AI

---

## ğŸ‘¥ Contributors

Built with AI assistance for SuperPatch sales enablement.

---

*Last Updated: January 9, 2026*
